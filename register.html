{% extends 'base.html' %}
{% block title %}Register{% endblock %}
{% block content %}
<div class="form-wrap">
    <h2>Create Account</h2>
    <form id="regForm" action="{{ url_for('register') }}" method="POST">
        <label>Full Name</label>
        <input name="fullname" required>
        <label>Email</label>
        <input name="email" type="email" required>
        <label>Phone</label>
        <input name="phone" required>
        <label>Password</label>
        <input name="password" type="password" required>
        <label>Account Type</label>
        <select name="role" required>
            <option value="customer">Customer</option>
            <option value="vendor">Vendor</option>
            <option value="rider">Rider</option>
        </select>

        <div id="vendorBlock" style="display:none">
            <label>Business Name (Vendor)</label>
            <input name="vendor_business">
            <label>Registration ID (Optional)</label>
            <input name="vendor_reg">
        </div>

        <div id="riderBlock" style="display:none">
            <label>Vehicle Type (Rider)</label>
            <input name="rider_vehicle">
            <label>National ID (for KYC)</label>
            <input name="rider_idno">
        </div>

        <div style="margin-top:16px; display:flex; gap:8px; flex-wrap:wrap">
            <button class="btn" type="submit">Register</button>
            <a class="btn outline" href="login.html">Already have account</a>
        </div>
        <p class="muted">Demo mode stores users locally. Production requires backend & payment integration for onboarding fees.</p>
    </form>
</div>

<script>
const reg = document.getElementById('regForm');
const role = reg.role;
const vendorBlock = document.getElementById('vendorBlock');
const riderBlock = document.getElementById('riderBlock');

role.addEventListener('change', () => {
    vendorBlock.style.display = role.value === 'vendor' ? 'block' : 'none';
    riderBlock.style.display = role.value === 'rider' ? 'block' : 'none';
});
</script>
{% endblock %}
